# Go 程序的基本结构和要素
## 包的概念、导入与可见性
包是结构化代码的一种方式：每个程序都由包（通常称为pkg）的概念组成，可以使用自身的包或者从其他包中导入内容

每个Go文件都属于且仅属于一个包。一个包可以由许多以`.go`为拓展名的源文件组成，因此文件名和包名一般来说都是不相同的。
你必须在源文件中非注释的第一行指明这个文件属于哪个包，如：`package amin`。`package main`表示一个可独立执行的程序，每个Go应用程序都包含一个名为`main`的包。

一个应用程序可以包含不同的包，而且即使你只使用main包也不必把所有的代码都写在一个巨大的文件里：可以在main包下写多个Go源代码文件将代码分隔开。
如果你打算编译包名不是为main的源文件，如`pack1`，编译后产生的对象文件将会是`pack1.a`而不是可执行程序。另外要注意的是，所有的包名都应该使用小写字母。

**标准库**

在 Go 的安装文件里包含了一些可以直接使用的包，即标准库。在 Windows 下，标准库的位置在 Go 根目录下的子目录 pkg\windows_386 中；在 Linux 下，标准库在 Go 根目录下的子目录 pkg\linux_amd64 中（如果是安装的是 32 位，则在 linux_386 目录中）。一般情况下，标准包会存放在 $GOROOT/pkg/$GOOS_$GOARCH/ 目录下。
Go 的标准库包含了大量的包（如：fmt 和 os）

在构建一个程序的过程中，包和包内的文件都必须以正确的顺序进行编译。包的依赖关系决定了其构建顺序。
属于同一个包的源文件必须全部被一起编译，一个包即是编译时的一个单据，因此根据惯例，每个目录都只包含一个包。

**如果对一个包进行更改或重新编译，所有引用了这个包的客户端程序都必须全部重新编译**

Go 中的包模型采用了显式依赖关系的机制来达到快速编译的目的，编译期会从后缀名为`.o`的对象文件（需要且只需要这个文件）中提取传递依赖类型的信息。

如果`A.go`依赖`B.go`，而`B.go`又依赖`C.go`：
* 编译`C.go`，`B.go`，然后是`A.go`.
* 为了编译`A.go`，编译器读取的是`B.o`而不是`C.o`
这种机制对于编译大型的项目时可以显著提升编译速度。

**每一段代码只会被编译一次**

一个Go程序是通过`import`关键字将一组包链接在一起。
`import "fmt"`告诉Go编译器这个程序需要使用`fmt`包（的函数，或其他元素），`fmt`包实现了格式化IO（输入/输出）的函数。包名被封闭在半角双引号`""`中。如果你打算从已编译的包中导入并加载公开声明的方法，不需要插入已编译包的源代码。

如果需要多个包，它们可以被分别导入：
``` go
import "fmt"
import "os"
```
或：
```go
import "fmt"; import "os"
```
还有更短且更优化的方法（因式分解关键字）
```go
import (
    "fmt"
    "os"
)
```
当你导入多个包时，最好按照字母顺序排列包名，这样做更加清晰易读。

如果包名不是以 . 或 / 开头，如 "fmt" 或者 "container/list"，则 Go 会在全局文件进行查找；如果包名以 ./ 开头，则 Go 会在相对目录中查找；如果包名以 / 开头（在 Windows 下也可以这样使用），则会在系统的绝对路径中查找。

导入包即等同于包含了这个包的所有的代码对象。

除了符号`_`，包中所有代码对象的标识符必须是唯一的，以避免名称冲突。但是相同的标识符可以在不同的包中使用，因为可以使用包名来区分它们。
包通过下面这个被编译器强制执行的规则来决定是否将自身的代码对象暴露给外部文件：

**可见性规则**

当标识符（包括常量、变量、类型、函数名、结构字段等等）以一个大写字母开头，如：Group1，那么使用这种形式的标识符的对象就可以被外部包的代码所使用（客户端程序需要先导入这个包），这被称为导出（像免息那个对象语言中的public）；标识符如果以小写字母开头，则对包外事不可见的，但是它们在整个包的内部是可见并且可用的（像面向对象语言中的private）

因此，在导入一个外部包后，能够且只能够访问该包中导出的对象。

**包的分级声明和初始化**
你可以在使用`import`导入包之后定义或声明0个或多个常量（const）、变量（var）和类型（type），这些对象的作用域都是全局的（在本包范围内），所以可以被本包中所有的函数调用，然后声明一个或多个函数（func）

## 函数
`main()`函数是每一个可执行程序所必须包含的，一般来说都是在启动后第一个执行的函数（如果有`init()`函数则会先执行该函数）

函数里的代码（函数体）使用大括号`{}`括起来。
左大括号`{`必须与方法的声明放在同一行，这是编译器的强制规定，否则你在使用gofmt时就会出现错误提示：
`build-error: syntax error: unexpected semicolon or newline before {`

**Go语言虽然看起来不使用分号作为语句的结束，但实际上这一过程是由编译器自动完成，因此才会引发像上面这样的错误**

## 注释
单行注释：`//`
多行注释：`/**/`

## 类型
变量（或常量）包含数据，这些数据可以有不同的数据类型，简称类型。使用`var`声明的变量的值会自动初始化为该类型的零值。类型定义了某个变量的值的集合与可对其进行操作的集合。

类型可以是基本类型，如：`int`、`float`、`bool`、`string`；
结构化的（复合的），如：`struct`、`array`、`切片（slice）`；
只描述类型的行文的，如：`interface`

结构化的类型没有真正的值，它使用`nil`作为默认值。Go语言中部存在类型继承。

函数也可以是一个确定的类型，就是以函数作为返回类型。这种类型的声明要写在函数名和可选的参数列表之后，例如：
`func FunctionName (a typea, b typeb) typeFunc`
你可以在函数体中的某处返回使用类型为`typeFUnc`的变量`var`：
`return var`
一个函数可以拥有多返回值，返回类型之间需哟啊使用逗号分隔，并使用小括号`()`将它们括起来，如：
`func FunctionName (a typea, b typeb) (t1 type1, t2 type2)`
示例：函数`Atoi()`：`func Atoi(s string) (i int, err error)`
返回的形式：
`return var1, var2`
这种多返回值一般用于判断某个函数是否执行成功（true/false）或与其他返回值一同返回错误消息（详见之后的并行赋值）。
使用`type`关键字可以定义你自己的类型，你可能想要定义一个结构体，但是也可以定义一个已经存在的类型的别名，如：
`type IZ int`


## Go 命名规范
干净、可读的代码和简洁性是 Go 追求的主要目标。通过 gofmt 来强制实现统一的代码风格。Go 语言中对象的命名也应该是简洁且有意义的。
